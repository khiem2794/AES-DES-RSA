
<div class="container center-align">

    {% if encrypted_file is defined %}
        <p>Hash: {{ file_hash }}</p>
        <a href="{{ encrypted_file }}">File encrypted</a>
    {% endif %}

    {{ form_start(form,  { 'attr': { 'id':'des_encryption' } } ) }}
    <div class="row">
        <div class="input-field col s12">
            {{ form_widget(form.Key,  { 'attr': { 'class':'materialize-textarea' } } ) }}
            <label for="form_Key" style="font-size: 1.1em">Your private key</label>
        </div>
    </div>

    <div class="row">
        <div class="file-field input-field col s12">
            <div class="btn">
                <span>File</span>
                {{ form_widget(form.File) }}
            </div>
            <div class="file-path-wrapper">
                <input class="file-path validate" type="text">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s12">
            {{ form_widget(form.submit, { 'attr': { 'class':'waves-effect waves-light btn right'} }) }}
        </div>
    </div>
    {{ form_end(form) }}

</div>

<div id="des_encryption_modal" class="modal">
    <div class="modal-content ">
        <h4>DES  ENCRYPTION  COMPLETE</h4>
        <p>MD5 HASH: <span id="des_encryption_hash"></span></p>
        <a id="des_encryption_path" class="waves-effect waves-green btn light-blue">Download</a>
    </div>
    <div class="modal-footer">
        <a class=" modal-action modal-close waves-effect waves-green btn-flat light-blue">Close</a>
    </div>
</div>
<script>
    $('#des_encryption').on('submit', function (e) {
        e.preventDefault();
        $(this).ajaxSubmit({success: desEncryptResponse});
    });
    function desEncryptResponse(jsonres, status, xhr, $form)  {
        console.log(jsonres.hash);
        console.log(jsonres.path);
        $("#des_encryption_hash").html(jsonres.hash);
        $("#des_encryption_path").attr("href", jsonres.path);
        $('#des_encryption_modal').openModal();
    }
</script>
